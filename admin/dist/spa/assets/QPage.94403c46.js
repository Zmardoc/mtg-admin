import{S as m,s as M,k as R,d as C,g as x,u as O,e as q,l as S,j as w}from"./query.9b51e0cf.js";import{I as f,g,a as y,a5 as E,w as v,ao as Q,ap as F,aq as K,u as p,c as A,J as c,h as P,d as L,L as U,a3 as j}from"./index.23daa906.js";class k extends m{constructor(t,s){super(),this.client=t,this.setOptions(s),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const e=this.options;this.options=this.client.defaultMutationOptions(t),M(e,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(s=this.currentMutation)==null||s.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const s={listeners:!0};t.type==="success"?s.onSuccess=!0:t.type==="error"&&(s.onError=!0),this.notify(s)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t!="undefined"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:R(),s={...t,isLoading:t.status==="loading",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=s}notify(t){C.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var s,e,n,i;(s=(e=this.mutateOptions).onSuccess)==null||s.call(e,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(i=this.mutateOptions).onSettled)==null||n.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var o,r,l,h;(o=(r=this.mutateOptions).onError)==null||o.call(r,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(h=this.mutateOptions).onSettled)==null||l.call(h,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)})})}}function z(u=""){const t=x(u),s=f(t,null);if(!s){var e;throw((e=g())==null?void 0:e.proxy)?new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library."):new Error("vue-query hooks can only be used inside setup() function.")}return s}function I(u,t,s){var e;const n=y(()=>D(u,t,s)),i=(e=n.value.queryClient)!=null?e:z(n.value.queryClientKey),o=new k(i,i.defaultMutationOptions(n.value)),r=E(o.getCurrentResult()),l=o.subscribe(a=>{O(r,a)}),h=(a,b)=>{o.mutate(a,b).catch(()=>{})};v(n,()=>{o.setOptions(i.defaultMutationOptions(n.value))},{flush:"sync"}),Q(()=>{l()});const d=F(K(r));return v(()=>r.error,a=>{if(a&&q(n.value.useErrorBoundary,[a]))throw a}),{...d,mutate:h,mutateAsync:r.mutate,reset:r.reset}}function D(u,t,s){const e=p(u),n=p(t);let i=e;return S(e)&&(typeof n=="function"?i={...p(s),mutationKey:e,mutationFn:n}:i={...n,mutationKey:e}),typeof e=="function"&&(i={...n,mutationFn:e}),w(i)}var V=A({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(u,{slots:t}){const{proxy:{$q:s}}=g(),e=f(U,c);if(e===c)return console.error("QPage needs to be a deep child of QLayout"),c;if(f(j,c)===c)return console.error("QPage needs to be child of QPageContainer"),c;const i=y(()=>{const r=(e.header.space===!0?e.header.size:0)+(e.footer.space===!0?e.footer.size:0);if(typeof u.styleFn=="function"){const l=e.isContainer.value===!0?e.containerHeight.value:s.screen.height;return u.styleFn(r,l)}return{minHeight:e.isContainer.value===!0?e.containerHeight.value-r+"px":s.screen.height===0?r!==0?`calc(100vh - ${r}px)`:"100vh":s.screen.height-r+"px"}}),o=y(()=>`q-page${u.padding===!0?" q-layout-padding":""}`);return()=>P("main",{class:o.value,style:i.value},L(t.default))}});export{V as Q,I as a,z as u};

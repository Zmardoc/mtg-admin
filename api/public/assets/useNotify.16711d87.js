import{S as m,s as M,k as R,d as C,g as x,u as O,e as S,l as q,j as E}from"./query.cd2519f8.js";import{I as p,g,a as y,a5 as w,w as v,ao as Q,ap as F,aq as K,u as d,c as k,J as c,h as A,d as P,L,a3 as U}from"./index.e7371674.js";import{i as j}from"./InputSearch.d853409a.js";class z extends m{constructor(t,s){super(),this.client=t,this.setOptions(s),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const e=this.options;this.options=this.client.defaultMutationOptions(t),M(e,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(s=this.currentMutation)==null||s.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const s={listeners:!0};t.type==="success"?s.onSuccess=!0:t.type==="error"&&(s.onError=!0),this.notify(s)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t!="undefined"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:R(),s={...t,isLoading:t.status==="loading",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=s}notify(t){C.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var s,e,n,o;(s=(e=this.mutateOptions).onSuccess)==null||s.call(e,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(o=this.mutateOptions).onSettled)==null||n.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var u,i,l,h;(u=(i=this.mutateOptions).onError)==null||u.call(i,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(h=this.mutateOptions).onSettled)==null||l.call(h,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:f})=>{f(this.currentResult)})})}}function D(r=""){const t=x(r),s=p(t,null);if(!s){var e;throw((e=g())==null?void 0:e.proxy)?new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library."):new Error("vue-query hooks can only be used inside setup() function.")}return s}function V(r,t,s){var e;const n=y(()=>H(r,t,s)),o=(e=n.value.queryClient)!=null?e:D(n.value.queryClientKey),u=new z(o,o.defaultMutationOptions(n.value)),i=w(u.getCurrentResult()),l=u.subscribe(a=>{O(i,a)}),h=(a,b)=>{u.mutate(a,b).catch(()=>{})};v(n,()=>{u.setOptions(o.defaultMutationOptions(n.value))},{flush:"sync"}),Q(()=>{l()});const f=F(K(i));return v(()=>i.error,a=>{if(a&&S(n.value.useErrorBoundary,[a]))throw a}),{...f,mutate:h,mutateAsync:i.mutate,reset:i.reset}}function H(r,t,s){const e=d(r),n=d(t);let o=e;return q(e)&&(typeof n=="function"?o={...d(s),mutationKey:e,mutationFn:n}:o={...n,mutationKey:e}),typeof e=="function"&&(o={...n,mutationFn:e}),E(o)}var J=k({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(r,{slots:t}){const{proxy:{$q:s}}=g(),e=p(L,c);if(e===c)return console.error("QPage needs to be a deep child of QLayout"),c;if(p(U,c)===c)return console.error("QPage needs to be child of QPageContainer"),c;const o=y(()=>{const i=(e.header.space===!0?e.header.size:0)+(e.footer.space===!0?e.footer.size:0);if(typeof r.styleFn=="function"){const l=e.isContainer.value===!0?e.containerHeight.value:s.screen.height;return r.styleFn(i,l)}return{minHeight:e.isContainer.value===!0?e.containerHeight.value-i+"px":s.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":s.screen.height-i+"px"}}),u=y(()=>`q-page${r.padding===!0?" q-layout-padding":""}`);return()=>A("main",{class:u.value,style:o.value},P(t.default))}});function T(){const{notify:r}=j();function t(n){r({message:n,color:"positive",icon:"check",timeout:1e3})}function s(n){r({message:n,color:"negative",icon:"lock",timeout:1e3})}function e(n){r({message:n,color:"dark",timeout:2e3,textColor:"primary",classes:"mtg-font-bold"})}return{notifyWelcome:e,notifySuccess:t,notifyError:s}}export{J as Q,T as a,V as b,D as u};
